<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zambia Emergency Response - Report Emergency</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        :root {
            --primary: #dc2626;
            --primary-dark: #c52929;
            --secondary: #2563eb;
            --accent: #059669;
            --dark: #1f2937;
            --light: #f3f4f6;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(to bottom, #1e40af 0%, #dc2626 100%);
            min-height: 100vh;
        }

        .emergency-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .emergency-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .emergency-btn {
            background: white;
            border-radius: 12px;
            padding: 1.2rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
            cursor: pointer;
            border: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 140px;
        }

        .emergency-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        #map {
            height: 300px;
            width: 100%;
            border-radius: 12px;
            z-index: 1;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            padding: 1rem;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            transform: translateX(calc(100% + 20px));
            transition: transform 0.3s ease;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2);
        }

        .notification.show {
            transform: translateX(0);
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        .calling-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
        }

        .phone-ring {
            animation: ring 1.5s infinite;
            transform-origin: center;
        }

        @keyframes ring {

            0%,
            100% {
                transform: rotate(0);
            }

            25% {
                transform: rotate(15deg);
            }

            50% {
                transform: rotate(-15deg);
            }

            75% {
                transform: rotate(5deg);
            }
        }

        .priority-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.35rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
            background: linear-gradient(to right, #3b82f6, #10b981);
        }

        .step-indicator {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            background: #e5e7eb;
            color: #6b7280;
        }

        .step-indicator.active {
            background: #3b82f6;
            color: white;
        }

        .step-indicator.completed {
            background: #10b981;
            color: white;
        }

        .responder-card {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .responder-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .rescue-center-card {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border-left: 4px solid #dc2626;
        }

        .rescue-center-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .login-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 16px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .login-tab {
            padding: 1rem;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }

        .login-tab.active {
            background: #dc2626;
            color: white;
        }

        .floating-action {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 100;
            cursor: pointer;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .user-type-btn {
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #e5e7eb;
        }

        .user-type-btn:hover {
            border-color: #3b82f6;
            transform: translateY(-3px);
        }

        .user-type-btn.selected {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
    </style>
</head>

<body class="min-h-screen text-gray-800">
    <!-- Login Modal -->
    <div id="login-modal" class="modal hidden">
        <div class="modal-content">
            <div class="p-6 border-b border-gray-200">
                <h2 class="text-2xl font-bold">Welcome to Zambia Emergency Response</h2>
                <p class="text-gray-600">Please choose how you want to use the system</p>
            </div>

            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <div class="user-type-btn" data-type="reporter">
                        <div class="text-4xl mb-3 text-blue-600">
                            <i class="fas fa-user"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Report Emergency</h3>
                        <p class="text-gray-600 text-sm">I need to report an emergency incident</p>
                    </div>

                    <div class="user-type-btn" data-type="responder">
                        <div class="text-4xl mb-3 text-red-600">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <h3 class="font-bold text-lg mb-2">Respond to Emergency</h3>
                        <p class="text-gray-600 text-sm">I'm a responder from a rescue center</p>
                    </div>
                </div>

                <div id="reporter-login" class="hidden">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                        <input type="tel"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            placeholder="+260 XXX XXX XXX">
                    </div>
                    <button class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg font-semibold">
                        Continue as Reporter
                    </button>
                </div>

                <div id="responder-login" class="hidden">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Organization</label>
                        <select
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">Select your organization</option>
                            <option value="hospital">Hospital</option>
                            <option value="police">Police Station</option>
                            <option value="fire">Fire Station</option>
                            <option value="security">Security Company</option>
                        </select>
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                        <input type="email"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            placeholder="your@email.com">
                    </div>

                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                        <input type="password"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            placeholder="Enter your password">
                    </div>

                    <button class="w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg font-semibold">
                        Login as Responder
                    </button>
                </div>
            </div>

            <div class="p-4 bg-gray-100 text-center">
                <p class="text-sm text-gray-600">By continuing, you agree to our <a href="#" class="text-blue-600">Terms
                        of Service</a> and <a href="#" class="text-blue-600">Privacy Policy</a></p>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-white shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="bg-red-600 p-2 rounded-lg">
                    <i class="fas fa-ambulance text-white text-2xl"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold">Zambia Emergency Response</h1>
                    <p class="text-xs text-gray-600">Citizen Emergency Reporting</p>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2 bg-red-50 px-3 py-1 rounded-full">
                    <div class="w-3 h-3 bg-green-500 rounded-full pulse"></div>
                    <span class="text-sm font-medium" id="status">Ready to help</span>
                </div>
                <button id="user-menu"
                    class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-lg transition-colors">
                    <i class="fas fa-user-circle mr-1"></i> Guest
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6">
        <div class="max-w-4xl mx-auto">
            <!-- Progress Indicator -->
            <div class="emergency-card p-5 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <div class="flex items-center space-x-4">
                        <div class="step-indicator completed">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="step-indicator active">2</div>
                        <div class="step-indicator">3</div>
                        <div class="step-indicator">4</div>
                    </div>
                    <div class="text-sm font-medium text-gray-600">Step 2 of 4</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 50%"></div>
                </div>
                <div class="flex justify-between mt-2 text-xs text-gray-600">
                    <div>Emergency Type</div>
                    <div>Details</div>
                    <div>Location</div>
                    <div>Confirmation</div>
                </div>
            </div>

            <!-- Emergency Type Selection -->
            <div class="emergency-card p-5 mb-6">
                <h2 class="text-xl font-bold mb-2">What type of emergency are you reporting?</h2>
                <p class="text-gray-600 mb-5">Select the category that best matches your emergency situation</p>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                    <button class="emergency-btn" data-type="medical">
                        <div class="text-4xl mb-2 text-red-600">🏥</div>
                        <div class="text-lg font-semibold">MEDICAL</div>
                        <div class="text-xs opacity-80">Injury or illness</div>
                    </button>

                    <button class="emergency-btn" data-type="fire">
                        <div class="text-4xl mb-2 text-orange-600">🔥</div>
                        <div class="text-lg font-semibold">FIRE</div>
                        <div class="text-xs opacity-80">Fire or explosion</div>
                    </button>

                    <button class="emergency-btn" data-type="police">
                        <div class="text-4xl mb-2 text-blue-600">👮</div>
                        <div class="text-lg font-semibold">POLICE</div>
                        <div class="text-xs opacity-80">Crime in progress</div>
                    </button>

                    <button class="emergency-btn" data-type="general">
                        <div class="text-4xl mb-2 text-yellow-600">⚠️</div>
                        <div class="text-lg font-semibold">OTHER</div>
                        <div class="text-xs opacity-80">Other emergency</div>
                    </button>
                </div>

                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-info-circle text-blue-500 text-xl mt-1"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-sm font-medium text-blue-800">Need immediate help?</h3>
                            <div class="mt-2 text-sm text-blue-700">
                                <p>If this is a life-threatening emergency, call <strong>991</strong> directly for
                                    fastest response.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nearest Rescue Centers -->
            <div class="emergency-card p-5 mb-6">
                <h2 class="text-xl font-bold mb-2">Nearest Rescue Centers</h2>
                <p class="text-gray-600 mb-5">Based on your location, these are the closest emergency services</p>

                <div class="space-y-4">
                    <div class="rescue-center-card">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="font-bold text-lg">University Teaching Hospital</h3>
                                <p class="text-gray-600">1.2 km away • Open 24 hours</p>
                                <div class="flex items-center mt-2">
                                    <div class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full mr-2">
                                        <i class="fas fa-bed mr-1"></i> 12 beds available
                                    </div>
                                    <div class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">
                                        <i class="fas fa-user-md mr-1"></i> 4 doctors on duty
                                    </div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-red-600">+260 211 256067</div>
                                <button
                                    class="mt-2 bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-sm">
                                    <i class="fas fa-phone mr-1"></i> Call Now
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="rescue-center-card">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="font-bold text-lg">Lusaka Central Police Station</h3>
                                <p class="text-gray-600">2.3 km away • Open 24 hours</p>
                                <div class="flex items-center mt-2">
                                    <div class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-2">
                                        <i class="fas fa-shield-alt mr-1"></i> 8 officers available
                                    </div>
                                    <div class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">
                                        <i class="fas fa-car mr-1"></i> 3 patrol vehicles
                                    </div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-red-600">+260 211 228794</div>
                                <button
                                    class="mt-2 bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-sm">
                                    <i class="fas fa-phone mr-1"></i> Call Now
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="rescue-center-card">
                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="font-bold text-lg">Lusaka Fire Station</h3>
                                <p class="text-gray-600">3.1 km away • Open 24 hours</p>
                                <div class="flex items-center mt-2">
                                    <div class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full mr-2">
                                        <i class="fas fa-fire-extinguisher mr-1"></i> 2 trucks available
                                    </div>
                                    <div class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">
                                        <i class="fas fa-users mr-1"></i> 6 firefighters on duty
                                    </div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="text-xl font-bold text-red-600">+260 211 228844</div>
                                <button
                                    class="mt-2 bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-sm">
                                    <i class="fas fa-phone mr-1"></i> Call Now
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <button
                    class="mt-4 w-full py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-medium transition-colors flex items-center justify-center">
                    <i class="fas fa-sync-alt mr-2"></i> Refresh Nearby Centers
                </button>
            </div>

            <!-- Emergency Details Form -->
            <div class="emergency-card p-5 mb-6">
                <h2 class="text-xl font-bold mb-2">Emergency Details</h2>
                <p class="text-gray-600 mb-5">Please provide details about the emergency situation</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">How many people are
                            affected?</label>
                        <select
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option>1 person</option>
                            <option>2-5 people</option>
                            <option>6-10 people</option>
                            <option>More than 10 people</option>
                            <option>Not sure</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Emergency severity</label>
                        <select
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option>Critical - Life threatening</option>
                            <option>Serious - Needs urgent attention</option>
                            <option>Moderate - Needs medical attention</option>
                            <option>Minor - First aid required</option>
                        </select>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Emergency description</label>
                    <textarea
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                        rows="3" placeholder="Please describe what happened..."></textarea>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Upload photos (optional)</label>
                    <div class="flex items-center justify-center w-full">
                        <label
                            class="flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50">
                            <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                <i class="fas fa-cloud-upload-alt text-gray-400 text-2xl mb-2"></i>
                                <p class="text-xs text-gray-500">Click to upload or drag and drop</p>
                            </div>
                            <input type="file" class="hidden" multiple>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Location Information -->
            <div class="emergency-card p-5 mb-6">
                <h2 class="text-xl font-bold mb-2">Emergency Location</h2>
                <p class="text-gray-600 mb-5">Please verify your location or provide address details</p>

                <div class="mb-4">
                    <div id="map" class="mb-4"></div>
                    <div class="flex justify-between items-center">
                        <div class="text-sm text-gray-600">
                            <i class="fas fa-location-dot text-red-600 mr-1"></i>
                            <span id="location-status">Detecting your location...</span>
                        </div>
                        <button class="text-sm text-blue-600 font-medium flex items-center">
                            <i class="fas fa-sync-alt mr-1"></i> Refresh Location
                        </button>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Address line</label>
                        <input type="text"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            placeholder="Street address">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Landmark (optional)</label>
                        <input type="text"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            placeholder="Nearby landmark">
                    </div>
                </div>
            </div>

            <!-- Contact Information -->
            <div class="emergency-card p-5 mb-6">
                <h2 class="text-xl font-bold mb-2">Your Contact Information</h2>
                <p class="text-gray-600 mb-5">Please provide your contact details for follow-up</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Your name</label>
                        <input type="text"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            placeholder="Full name">
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Phone number</label>
                        <input type="tel"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            placeholder="+260 XXX XXX XXX">
                    </div>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Can responders contact you?</label>
                    <div class="flex space-x-4 mt-2">
                        <label class="inline-flex items-center">
                            <input type="radio" class="form-radio text-blue-600" name="contact" checked>
                            <span class="ml-2">Yes, contact me</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" class="form-radio text-blue-600" name="contact">
                            <span class="ml-2">No, report anonymously</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex justify-between">
                <button
                    class="px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg font-medium flex items-center">
                    <i class="fas fa-arrow-left mr-2"></i> Back
                </button>
                <button
                    class="px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium flex items-center">
                    Report Emergency <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
    </main>

    <!-- Emergency Action Footer -->
    <footer class="bg-white border-t border-gray-200 mt-8 py-4">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                <div class="text-sm text-gray-600">
                    © 2023 Zambia Emergency Response System. All rights reserved.
                </div>
                <div class="flex space-x-3">
                    <button class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-lg transition-colors">
                        <i class="fas fa-shield-alt mr-1"></i> Privacy
                    </button>
                    <button class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-lg transition-colors">
                        <i class="fas fa-file-alt mr-1"></i> Terms
                    </button>
                    <button class="text-sm bg-gray-100 hover:bg-gray-200 px-3 py-1 rounded-lg transition-colors">
                        <i class="fas fa-question-circle mr-1"></i> Help
                    </button>
                </div>
            </div>
        </div>
    </footer>

    <!-- Emergency Call Button -->
    <div class="floating-action">
        <i class="fas fa-phone-alt text-xl"></i>
    </div>

    <!-- Calling Modal -->
    <div id="calling-modal" class="calling-modal hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md">
            <div class="text-center">
                <div class="text-5xl text-red-600 mb-4 phone-ring">
                    <i class="fas fa-phone"></i>
                </div>
                <h2 class="text-2xl font-bold mb-2">Calling Emergency Services</h2>
                <div id="calling-details" class="mb-4">
                    <p class="text-gray-600">Connecting to nearest dispatch center</p>
                </div>
                <div class="text-3xl font-mono font-bold text-red-600 mb-4">991</div>
                <div class="flex justify-center space-x-4">
                    <button class="bg-red-600 hover:bg-red-700 text-white px-5 py-2 rounded-full font-semibold">
                        <i class="fas fa-phone mr-1"></i> Call
                    </button>
                    <button id="cancel-call"
                        class="bg-gray-300 hover:bg-gray-400 text-gray-800 px-5 py-2 rounded-full font-semibold">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Show login modal on page load
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('login-modal').classList.remove('hidden');
        });

        // User type selection
        document.querySelectorAll('.user-type-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                document.querySelectorAll('.user-type-btn').forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');

                const userType = this.getAttribute('data-type');
                document.getElementById('reporter-login').classList.add('hidden');
                document.getElementById('responder-login').classList.add('hidden');

                if (userType === 'reporter') {
                    document.getElementById('reporter-login').classList.remove('hidden');
                } else {
                    document.getElementById('responder-login').classList.remove('hidden');
                }
            });
        });

        // Initialize map
        function initMap() {
            const map = L.map('map').setView([-15.3875, 28.3228], 13);

            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(map);

            // Add a marker for the user's location
            const userMarker = L.marker([-15.3875, 28.3228]).addTo(map)
                .bindPopup('Your approximate location')
                .openPopup();

            // Add circle to show accuracy
            const accuracyCircle = L.circle([-15.3875, 28.3228], {
                color: 'blue',
                fillColor: '#3b82f6',
                fillOpacity: 0.2,
                radius: 500
            }).addTo(map);

            // Add markers for nearby rescue centers
            const rescueCenters = [
                { lat: -15.3955, lng: 28.3200, type: 'hospital', name: 'University Teaching Hospital' },
                { lat: -15.4167, lng: 28.2833, type: 'police', name: 'Lusaka Central Police Station' },
                { lat: -15.4100, lng: 28.2900, type: 'fire', name: 'Lusaka Fire Station' },
                { lat: -15.3775, lng: 28.3100, type: 'hospital', name: 'Levy Mwanawasa Hospital' }
            ];

            rescueCenters.forEach(center => {
                let iconColor;
                switch (center.type) {
                    case 'hospital': iconColor = 'red'; break;
                    case 'police': iconColor = 'blue'; break;
                    case 'fire': iconColor = 'orange'; break;
                    default: iconColor = 'gray';
                }

                const icon = L.divIcon({
                    className: 'custom-icon',
                    html: `<div style="background-color: ${iconColor}; width: 16px; height: 16px; border-radius: 50%; border: 2px solid white; box-shadow: 0 0 10px rgba(0,0,0,0.5);"></div>`,
                    iconSize: [16, 16],
                    iconAnchor: [8, 8]
                });

                L.marker([center.lat, center.lng], { icon: icon })
                    .addTo(map)
                    .bindPopup(center.name);
            });

            // Update location status
            document.getElementById('location-status').textContent = 'Location detected - Lusaka, Zambia';
        }

        // Initialize the map
        initMap();

        // Emergency button selection
        document.querySelectorAll('.emergency-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                // Remove any existing active class
                document.querySelectorAll('.emergency-btn').forEach(b => {
                    b.style.border = 'none';
                    b.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.1)';
                });

                // Add active indication
                this.style.border = '3px solid #dc2626';
                this.style.boxShadow = '0 6px 12px rgba(220, 38, 38, 0.2)';

                // Show notification
                showNotification('Emergency type selected', 'success');
            });
        });

        // Floating action button
        document.querySelector('.floating-action').addEventListener('click', function () {
            document.getElementById('calling-modal').classList.remove('hidden');
        });

        // Cancel call button
        document.getElementById('cancel-call').addEventListener('click', function () {
            document.getElementById('calling-modal').classList.add('hidden');
            showNotification('Emergency call cancelled', 'info');
        });

        // Call now buttons for rescue centers
        document.querySelectorAll('.rescue-center-card button').forEach(btn => {
            btn.addEventListener('click', function () {
                const phoneNumber = this.parentElement.querySelector('.text-xl').textContent;
                document.getElementById('calling-details').innerHTML = `<p class="text-gray-600">Calling: ${phoneNumber}</p>`;
                document.getElementById('calling-modal').classList.remove('hidden');
            });
        });

        // Notification function
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;

            let bgColor = 'bg-blue-500';
            if (type === 'success') bgColor = 'bg-green-500';
            if (type === 'error') bgColor = 'bg-red-500';
            if (type === 'info') bgColor = 'bg-blue-500';

            notification.className = `notification ${bgColor}`;
            notification.textContent = message;

            document.body.appendChild(notification);

            // Show notification
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            // Hide notification after 4 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 300);
            }, 4000);
        }

        // Simulate live status updates
        setInterval(() => {
            const statuses = ['Ready to help', 'Monitoring', 'Processing', 'Standing by'];
            const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
            document.getElementById('status').textContent = randomStatus;
        }, 8000);
    </script>
</body>

</html>